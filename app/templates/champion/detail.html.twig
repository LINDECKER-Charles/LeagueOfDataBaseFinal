{# templates/champion/detail.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}{{ champion.name ?? 'Champion' }} - {{ client.session.version ?? (client.versions|first) }}{% endblock %}
{% block meta_description %}
  {{ 'champion.detail.meta_description'|trans({
    '%name%': champion.name ?? 'Champion',
    '%version%': client.session.version ?? (client.versions|first)
  }) }}
{% endblock %}
{% block img %}/preview/champions.png{% endblock %}

{% block body %}
<main class="relative min-h-[70vh] bg-blue-950 overflow-hidden py-10 w-full">
  {% include 'partials/main/gradient.html.twig' %}

  {% set selectedVersion = client.session.version ?? (client.versions|default([])|first) %}
  {% set selectedLocale  = client.session.locale  ?? client.currentLocale ?? 'en_US' %}

  <div class="relative mx-auto max-w-5xl px-4">
    {# === En-tête === #}
    <article class="mb-10 flex items-center gap-6">
      {% if image %}
        <div class="relative shrink-0 h-28 w-28 rounded-2xl bg-blue-950 border border-grey-700 overflow-hidden">
          <img src="{{ asset(image) }}" alt="{{ champion.name }}" class="absolute inset-0 w-full h-full object-cover">
        </div>
      {% else %}
        <div class="h-24 w-24 rounded-2xl grid place-items-center bg-blue-950 border border-grey-700 text-blue-200/70 text-lg">
          {{ champion.name|slice(0,2)|upper }}
        </div>
      {% endif %}

      <section>
        <h1 class="font-beaufort text-4xl tracking-wide text-transparent bg-clip-text bg-gradient-to-r from-blue-100 via-blue-300 to-blue-100">
          {{ champion.name ?? 'Champion' }}
        </h1>
        <p class="font-spiegel text-blue-200/80 mt-1">{{ champion.title | capitalize }}</p>
        <p class="mt-1 text-sm text-blue-200/60">
          {{ 'champion.detail.version_locale'|trans({
            '%version%': selectedVersion,
            '%locale%': selectedLocale
          }) }}
        </p>
      </section>
    </article>

    {# === Rôles + Énergie === #}
    <section class="mb-8">
      <div class="flex flex-wrap gap-2 mb-3">
        {% for tag in champion.tags %}
          <span class="rounded-full bg-blue-950/70 px-3 py-1 text-sm border border-grey-700 text-blue-200/90">{{ tag }}</span>
        {% endfor %}
      </div>
      {% if champion.partype %}
        <p class="text-blue-200/70 text-sm italic">
          {{ 'champion.detail.partype'|trans({'%partype%': champion.partype}) }}
        </p>
      {% endif %}
    </section>

    {# === Statistiques de base === #}
    {% if champion.stats is defined %}
      <section class="mb-8">
        <h2 class="text-lg font-semibold text-white mb-3">{{ 'champion.detail.stats.title'|trans }}</h2>
        <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
          {% for key, val in champion.stats %}
            <div class="rounded-lg bg-blue-950/80 p-3 border border-grey-700">
              <dt class="text-blue-200/70 text-sm">{{ key|replace({'perlevel': ' /niveau'})|capitalize }}</dt>
              <dd class="font-medium text-white/90">{{ val }}</dd>
            </div>
          {% endfor %}
        </div>
      </section>
    {% endif %}

    {# === Informations complémentaires === #}
    {% if champion.info is defined %}
      <section class="mb-8">
        <h2 class="text-lg font-semibold text-white mb-3">{{ 'champion.detail.profile.title'|trans }}</h2>
        <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
          <div class="rounded-lg bg-blue-950/80 p-3 border border-grey-700">
            <dt class="text-blue-200/70 text-sm">{{ 'champion.detail.profile.attack'|trans }}</dt>
            <dd class="font-medium text-white/90">{{ champion.info.attack }}</dd>
          </div>
          <div class="rounded-lg bg-blue-950/80 p-3 border border-grey-700">
            <dt class="text-blue-200/70 text-sm">{{ 'champion.detail.profile.defense'|trans }}</dt>
            <dd class="font-medium text-white/90">{{ champion.info.defense }}</dd>
          </div>
          <div class="rounded-lg bg-blue-950/80 p-3 border border-grey-700">
            <dt class="text-blue-200/70 text-sm">{{ 'champion.detail.profile.magic'|trans }}</dt>
            <dd class="font-medium text-white/90">{{ champion.info.magic }}</dd>
          </div>
          <div class="rounded-lg bg-blue-950/80 p-3 border border-grey-700">
            <dt class="text-blue-200/70 text-sm">{{ 'champion.detail.profile.difficulty'|trans }}</dt>
            <dd class="font-medium text-white/90">{{ champion.info.difficulty }}</dd>
          </div>
        </div>
      </section>
    {% endif %}

    {# === Description === #}
    {% if champion.blurb %}
      <section class="mb-10">
        <h2 class="text-lg font-semibold text-white mb-3">{{ 'champion.detail.lore.title'|trans }}</h2>
        <p class="text-blue-100/90 leading-relaxed">{{ champion.blurb }}</p>
      </section>
    {% endif %}

    {# === Actions === #}
    {% include 'partials/main/elem/change.html.twig' %}
  </div>
</main>
{% endblock %}
