{# templates/champion/liste.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Champions - {{ meta.currentPage }}/{{ meta.nombrePage }}{% endblock %}
{% block meta_description %}
  Découvrez la liste complète des champions de League of Legends ({{ meta.totalItem }} au total),
  avec rôles et descriptions pour le patch {{ client.session.version ?? (client.versions|first) }}.
{% endblock %}
{% block img %}/preview/champions.png{% endblock %}

{% block body %}
<main class="relative px-6 py-10">
  {% include 'partials/main/gradient.html.twig' %}

  <div class="relative mx-auto max-w-7xl">
    {# === En-tête === #}
    <header class="mb-8 flex flex-col gap-5 sm:flex-row sm:items-end sm:justify-between">
      <div class="group flex items-center gap-4">
        {% include 'partials/main/viewLogo.html.twig' %}
        <div>
          <h1 class="font-beaufort text-4xl tracking-wide text-transparent bg-clip-text bg-gradient-to-r from-blue-100 via-blue-300 to-blue-100 brand-title">
            {{ 'champion.list.title'|trans }}
          </h1>
          <p class="font-spiegel text-blue-200/80 mt-1">
            <span class="align-middle">{{ 'champion.list.subtitle'|trans }}</span>
            <span class="ml-2 text-sm inline-block rounded-full border border-grey-700 bg-blue-950 px-2 py-0.5">
              {{ meta.totalItem }} champions
            </span>
          </p>
        </div>
      </div>

      {% include 'partials/main/actionBarre.html.twig' %}
    </header>

    {# === Grille des champions === #}
    <article class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
      {% for c in champions %}
        {% set id      = c.id|default('') %}
        {% set name    = c.name|default('') %}
        {% set title   = c.title|default('') %}
        {% set tags    = c.tags is defined ? c.tags : [] %}
        {% set desc    = c.blurb|default('') %}
        {% set imgPath = images[loop.index0]|default(null) %}
        {% include 'champion/partials/card.html.twig' %}
      {% else %}
        {% include 'champion/partials/noResult.html.twig' %}
      {% endfor %}
    </article>
  </div>

  {# === Pagination === #}
  {% include 'partials/pagination.html.twig' with {
    currentPage: meta.currentPage,
    totalPages: meta.nombrePage,
    itemPerPage: meta.itemPerPage,
    totalItems: meta.totalItem,
    type: meta.type
  } %}
</main>

{# === Script JS pour pagination asynchrone === #}
<script type="module" data-reload>
  import initAddonScript from '{{ asset("js/ajaxChampion.js") }}';
  initAddonScript();
</script>
{% endblock %}
